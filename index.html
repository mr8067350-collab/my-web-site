<!DOCTYPE html>
<html>
<head>
<title>Business Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#f1f1f1;}
/* Sidebar */
.sidebar{
width:250px;height:100vh;background:black;color:white;position:fixed;padding-top:20px;
}
.sidebar h2{text-align:center;margin-bottom:30px;}
.sidebar a{display:block;color:white;padding:15px;text-decoration:none;}
.sidebar a:hover{background:#333;}
/* Main */
.main{margin-left:250px;padding:20px;}
.topbar{display:flex;justify-content:space-between;align-items:center;background:white;padding:15px 20px;border-radius:10px;}
.right-section{display:flex;align-items:center;gap:20px;position:relative;}
.balance{font-weight:bold;color:green;font-size:18px;}
.menu-dot{font-size:22px;cursor:pointer;}
.card{background:white;padding:20px;margin-top:20px;border-radius:10px;}
button{width:100%;padding:10px;margin-top:15px;background:black;color:white;border:none;border-radius:5px;cursor:pointer;}
button:hover{background:#444;}
.package{padding:10px;margin-top:10px;background:#f9f9f9;border-radius:5px;}
input{width:100%;padding:10px;margin-top:10px;border-radius:5px;border:1px solid #ccc;}
.dropdown{display:none;position:absolute;top:40px;right:0;background:#1c1c1c;color:white;border-radius:5px;width:200px;}
.dropdown div{padding:10px 15px;cursor:pointer;}
.dropdown div:hover{background:#333;}
#loginBox,#registerBox,#adminLoginBox{background:white;padding:20px;border-radius:10px;width:300px;margin:50px auto;}
.toggleLink{color:lightgreen;cursor:pointer;margin-top:10px;display:inline-block;}
</style>
</head>
<body>

<!-- LOGIN / REGISTER -->
<div id="loginBox">
<h3>Login</h3>
<input type="text" id="loginUser" placeholder="User ID"><br>
<input type="password" id="loginPass" placeholder="Password"><br>
<button onclick="login()">Login</button><br>
<span class="toggleLink" onclick="showRegister()">New user? Register</span><br>
<span class="toggleLink" onclick="showAdminLogin()">Admin Login</span>
</div>

<div id="registerBox" style="display:none;">
<h3>Register</h3>
<input type="text" id="regUser" placeholder="User ID"><br>
<input type="password" id="regPass" placeholder="Password"><br>
<input type="text" id="refCode" placeholder="Referral Code (Optional)"><br>
<button onclick="register()">Register</button><br>
<span class="toggleLink" onclick="showLogin()">Already have account? Login</span>
</div>

<div id="adminLoginBox" style="display:none;">
<h3>Admin Login</h3>
<input type="password" id="adminPass" placeholder="Admin Password"><br>
<button onclick="adminLogin()">Login as Admin</button><br>
<span class="toggleLink" onclick="showLogin()">Back to User Login</span>
</div>

<!-- MAIN DASHBOARD -->
<div id="mainPage" style="display:none;">
<div class="sidebar">
<h2>Menu</h2>
<a href="#" onclick="toggleMenu()">Menu</a>
<a href="#" onclick="logout()">Logout</a>
</div>

<div class="main">
<div class="topbar">
<h3>Dashboard</h3>
<div class="right-section">
<div class="balance" id="balance">Balance: ৳ 0</div>
<div class="menu-dot" onclick="toggleDropdown()">⋮</div>
<div class="dropdown" id="dropdownMenu">
<div onclick="showDeposit()">Deposit</div>
<div onclick="withdraw()">Withdraw</div>
<div onclick="changePass()">Change Password</div>
<div onclick="showReferral()">Referral Code</div>
</div>
</div>
</div>

<!-- Packages Only -->
<div class="card" id="packagesCard">
<h3>Packages</h3>
<div class="package">Silver Package – 10% Cashback</div>
<div class="package">Gold Package – 80 TK Cashback</div>
<div class="package">Platinum Package – 200 TK Cashback</div>
<div class="package">Diamond Package – 350 TK Cashback</div>
<div class="package">Premium Package – 500 TK Cashback</div>
</div>

<!-- Deposit -->
<div class="card" id="depositCard" style="display:none">
<h3>Deposit System</h3>
<p><b>bKash:</b> 01XXXXXXXXX</p>
<p><b>Nagad:</b> 01XXXXXXXXX</p>
<p><b>Rocket:</b> 01XXXXXXXXX</p>
<input type="text" id="depositAmount" placeholder="Enter Amount">
<input type="text" id="transactionId" placeholder="Transaction ID">
<button onclick="submitDeposit()">Submit Deposit Request</button>
</div>

<!-- Referral -->
<div class="card" id="referralCard" style="display:none">
<h3>Referral Code</h3>
<input type="text" id="userRef" placeholder="Enter Referral Code">
<button onclick="applyReferral()">Apply Referral</button>
</div>

</div>

<!-- ADMIN DASHBOARD -->
<div id="adminPage" style="display:none;">
<div class="sidebar">
<h2>Admin Panel</h2>
<a href="#" onclick="adminLogout()">Logout</a>
</div>
<div class="main">
<h3>All Users</h3>
<table class="userTable" id="userTable">
<tr><th>User</th><th>Balance</th><th>Action</th></tr>
</table>
</div>
</div>

<script>
// Toggle Login/Register/Admin
function showRegister(){loginBox.style.display="none";registerBox.style.display="block";adminLoginBox.style.display="none";}
function showLogin(){loginBox.style.display="block";registerBox.style.display="none";adminLoginBox.style.display="none";}
function showAdminLogin(){loginBox.style.display="none";registerBox.style.display="none";adminLoginBox.style.display="block";}

// Local Storage Users
function register(){
let user=regUser.value,pass=regPass.value,ref=refCode.value;
if(!user||!pass){alert("Fill all fields");return;}
if(localStorage.getItem(user)){alert("User exists!");return;}
let data={password:pass,balance:0};
localStorage.setItem(user,JSON.stringify(data));
// Referral bonus
if(ref && localStorage.getItem(ref)){
let refUser=JSON.parse(localStorage.getItem(ref));
refUser.balance+=50;
localStorage.setItem(ref,JSON.stringify(refUser));
}
alert("Registered Successfully!");
showLogin();
}

function login(){
let user=loginUser.value,pass=loginPass.value;
let data=localStorage.getItem(user);
if(!data){alert("User not found!");return;}
data=JSON.parse(data);
if(data.password!==pass){alert("Wrong password!");return;}
localStorage.setItem("currentUser",user);
loadDashboard();
}

function loadDashboard(){
loginBox.style.display="none";
registerBox.style.display="none";
adminLoginBox.style.display="none";
mainPage.style.display="block";
packagesCard.style.display="block";
depositCard.style.display="none";
referralCard.style.display="none";
updateBalance();
}

function updateBalance(){
let user=localStorage.getItem("currentUser");
let data=JSON.parse(localStorage.getItem(user));
document.getElementById("balance").innerText="Balance: ৳ "+data.balance;
}

// Menu Dropdown
function toggleDropdown(){
let d=document.getElementById("dropdownMenu");
d.style.display=d.style.display==="block"?"none":"block";
}
function showDeposit(){depositCard.style.display="block";referralCard.style.display="none";}
function showReferral(){referralCard.style.display="block";depositCard.style.display="none";}
function withdraw(){
let amt=prompt("Enter withdraw amount (min 100):");
if(!amt||amt<100){alert("Minimum 100 Tk");return;}
let user=localStorage.getItem("currentUser");
let data=JSON.parse(localStorage.getItem(user));
if(amt>data.balance){alert("Not enough balance!");return;}
data.balance-=parseInt(amt);
localStorage.setItem(user,JSON.stringify(data));
updateBalance();
alert("Withdraw Successful!");
}
function changePass(){
let np=prompt("New password:");
if(np){
let user=localStorage.getItem("currentUser");
let data=JSON.parse(localStorage.getItem(user));
data.password=np;
localStorage.setItem(user,JSON.stringify(data));
alert("Password Changed!");
}
}
function logout(){localStorage.removeItem("currentUser");location.reload();}

// Admin Login
const adminPassword="admin123"; // Change as needed
function adminLogin(){
let pass=document.getElementById("adminPass").value;
if(pass!==adminPassword){alert("Wrong Admin Password!");return;}
loginBox.style.display="none";
registerBox.style.display="none";
adminLoginBox.style.display="none";
mainPage.style.display="none";
loadAdmin();
}

function loadAdmin(){
adminPage.style.display="block";
updateUserTable();
}

function updateUserTable(){
let table=document.getElementById("userTable");
table.innerHTML="<tr><th>User</th><th>Balance</th><th>Action</th></tr>";
for(let i=0;i<localStorage.length;i++){
let key=localStorage.key(i);
if(key==="currentUser")continue;
let data=JSON.parse(localStorage.getItem(key));
let row=table.insertRow();
row.insertCell(0).innerText=key;
row.insertCell(1).innerText=data.balance;
let btn=document.createElement("button");
btn.innerText="Add 100";
btn.onclick=function(){data.balance+=100;localStorage.setItem(key,JSON.stringify(data));updateUserTable();};
row.insertCell(2).appendChild(btn);
}
}

function adminLogout(){adminPage.style.display="none";showLogin();}

// Demo Deposit & Referral
function submitDeposit(){alert("Deposit request submitted (demo).");}
function applyReferral(){alert("Referral code applied (demo).");}

// Auto login if user exists
if(localStorage.getItem("currentUser")){loadDashboard();}
</script>

</body>
</html>
