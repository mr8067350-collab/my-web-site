<!DOCTYPE html>
<html>
<head>
<title>Business Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:linear-gradient(135deg,#ff9a9e,#fad0c4,#fbc2eb,#a18cd1);background-size:400% 400%;animation:grad 15s ease infinite;}
@keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
/* Sidebar */
.sidebar{width:250px;height:100vh;background:black;color:white;position:fixed;padding-top:20px;transition:0.3s;}
.sidebar h2{text-align:center;margin-bottom:30px;}
.sidebar a{display:block;color:white;padding:15px;text-decoration:none;}
.sidebar a:hover{background:#333;}
/* Main */
.main{margin-left:250px;padding:20px;transition:0.3s;}
.topbar{display:flex;justify-content:space-between;align-items:center;background:white;padding:15px 20px;border-radius:10px;}
.right-section{display:flex;align-items:center;gap:20px;position:relative;}
.balance{font-weight:bold;color:green;font-size:18px;cursor:pointer;}
.card{background:white;padding:20px;margin-top:20px;border-radius:10px;}
button{width:100%;padding:10px;margin-top:15px;background:black;color:white;border:none;border-radius:5px;cursor:pointer;}
button:hover{background:#444;}
.package{padding:10px;margin-top:10px;background:#f9f9f9;border-radius:5px;}
input{width:100%;padding:10px;margin-top:10px;border-radius:5px;border:1px solid #ccc;}
/* Responsive */
@media(max-width:768px){
.sidebar{width:100%;height:auto;position:relative;}
.main{margin-left:0;}
.topbar{flex-direction:column;align-items:flex-start;}
}
#loginBox,#registerBox,#adminLoginBox{background:white;padding:20px;border-radius:10px;width:90%;max-width:350px;margin:50px auto;}
.toggleLink{color:lightgreen;cursor:pointer;margin-top:10px;display:inline-block;}
</style>
</head>
<body>

<!-- LOGIN / REGISTER -->
<div id="loginBox">
<h3>Login</h3>
<input type="text" id="loginUser" placeholder="User ID"><br>
<input type="password" id="loginPass" placeholder="Password"><br>
<button onclick="login()">Login</button><br>
<span class="toggleLink" onclick="showRegister()">New user? Register</span><br>
<span class="toggleLink" onclick="showAdminLogin()">Admin Login</span>
</div>

<div id="registerBox" style="display:none;">
<h3>Register</h3>
<input type="text" id="regUser" placeholder="User ID"><br>
<input type="password" id="regPass" placeholder="Password"><br>
<input type="text" id="refCode" placeholder="Referral Code (Optional)"><br>
<button onclick="register()">Register</button><br>
<span class="toggleLink" onclick="showLogin()">Already have account? Login</span>
</div>

<div id="adminLoginBox" style="display:none;">
<h3>Admin Login</h3>
<input type="password" id="adminPass" placeholder="Admin Password"><br>
<button onclick="adminLogin()">Login as Admin</button><br>
<span class="toggleLink" onclick="showLogin()">Back to User Login</span>
</div>

<!-- MAIN DASHBOARD -->
<div id="mainPage" style="display:none;">
<div class="sidebar">
<h2>Menu</h2>
<a href="#" onclick="showSection('packagesCard')">Packages</a>
<a href="#" onclick="showSection('depositCard')">Deposit</a>
<a href="#" onclick="showSection('referralCard')">Referral Code</a>
<a href="#" onclick="changePass()">Change Password</a>
<a href="#" onclick="logout()">Logout</a>
</div>

<div class="main">
<div class="topbar">
<h3>Dashboard</h3>
<div class="right-section">
<div class="balance" onclick="withdraw()">Withdraw</div>
</div>
</div>

<!-- Packages -->
<div class="card" id="packagesCard">
<h3>Packages</h3>
<div class="package">
<b>Silver Package:</b> 250 Tk, 10% Cashback, Daily 11 Tk, Referral 20 Tk
<button onclick="buyPackage('Silver')">Buy</button>
</div>
<div class="package">
<b>Gold Package:</b> 550 Tk, 80 Tk Cashback, Daily 25 Tk, Referral 35 Tk
<button onclick="buyPackage('Gold')">Buy</button>
</div>
<div class="package">
<b>Platinum Package:</b> 1050 Tk, 200 Tk Cashback, Daily 40 Tk, Referral 50 Tk
<button onclick="buyPackage('Platinum')">Buy</button>
</div>
<div class="package">
<b>Diamond Package:</b> 1550 Tk, 350 Tk Cashback, Daily 50 Tk, Referral 100 Tk
<button onclick="buyPackage('Diamond')">Buy</button>
</div>
<div class="package">
<b>Premium Package:</b> 2250 Tk, 500 Tk Cashback, Daily 80 Tk, Referral 150 Tk
<button onclick="buyPackage('Premium')">Buy</button>
</div>
</div>

<!-- Deposit -->
<div class="card" id="depositCard" style="display:none">
<h3>Deposit System</h3>
<p><b>bKash:</b> 01XXXXXXXXX</p>
<p><b>Nagad:</b> 01XXXXXXXXX</p>
<p><b>Rocket:</b> 01XXXXXXXXX</p>
<input type="text" id="depositAmount" placeholder="Enter Amount">
<input type="text" id="transactionId" placeholder="Transaction ID">
<button onclick="submitDeposit()">Submit Deposit Request</button>
</div>

<!-- Referral -->
<div class="card" id="referralCard" style="display:none">
<h3>Referral Code</h3>
<input type="text" id="userRef" placeholder="Enter Referral Code">
<button onclick="applyReferral()">Apply Referral</button>
</div>

</div>

<!-- ADMIN DASHBOARD -->
<div id="adminPage" style="display:none;">
<div class="sidebar">
<h2>Admin Panel</h2>
<a href="#" onclick="adminLogout()">Logout</a>
</div>
<div class="main">
<h3>All Users</h3>
<table class="userTable" id="userTable">
<tr><th>User</th><th>Balance</th><th>Action</th></tr>
</table>
</div>
</div>

<script>
// Toggle Login/Register/Admin
function showRegister(){loginBox.style.display="none";registerBox.style.display="block";adminLoginBox.style.display="none";}
function showLogin(){loginBox.style.display="block";registerBox.style.display="none";adminLoginBox.style.display="none";}
function showAdminLogin(){loginBox.style.display="none";registerBox.style.display="none";adminLoginBox.style.display="block";}

// Show only selected section
function showSection(id){
packagesCard.style.display="none";
depositCard.style.display="none";
referralCard.style.display="none";
document.getElementById(id).style.display="block";
}

// Local Storage Users
function register(){
let user=regUser.value,pass=regPass.value,ref=refCode.value;
if(!user||!pass){alert("Fill all fields");return;}
if(localStorage.getItem(user)){alert("User exists!");return;}
let data={password:pass,balance:0,package:null,dailyIncome:0};
localStorage.setItem(user,JSON.stringify(data));
// Referral bonus
if(ref && localStorage.getItem(ref)){
let refUser=JSON.parse(localStorage.getItem(ref));
refUser.balance+=50;
localStorage.setItem(ref,JSON.stringify(refUser));
}
alert("Registered Successfully!");
showLogin();
}

function login(){
let user=loginUser.value,pass=loginPass.value;
let data=localStorage.getItem(user);
if(!data){alert("User not found!");return;}
data=JSON.parse(data);
if(data.password!==pass){alert("Wrong password!");return;}
localStorage.setItem("currentUser",user);
loadDashboard();
}

function loadDashboard(){
loginBox.style.display="none";
registerBox.style.display="none";
adminLoginBox.style.display="none";
mainPage.style.display="block";
showSection('packagesCard');
startDailyIncome();
}

// Packages Buy
const packages={
"Silver":{cost:250,daily:11,ref:20,cashback:25},
"Gold":{cost:550,daily:25,ref:35,cashback:80},
"Platinum":{cost:1050,daily:40,ref:50,cashback:200},
"Diamond":{cost:1550,daily:50,ref:100,cashback:350},
"Premium":{cost:2250,daily:80,ref:150,cashback:500}
};

function buyPackage(name){
let user=localStorage.getItem("currentUser");
let data=JSON.parse(localStorage.getItem(user));
if(data.balance<packages[name].cost){alert("Not enough balance!");return;}
data.balance-=packages[name].cost;
data.package=name;
data.dailyIncome=packages[name].daily;
data.balance+=packages[name].cashback; // Cashback instantly
localStorage.setItem(user,JSON.stringify(data));
alert(name+" Package Bought! Daily income added: "+packages[name].daily+" Tk");
updateBalance();
}

function startDailyIncome(){
setInterval(()=>{
let user=localStorage.getItem("currentUser");
if(!user) return;
let data=JSON.parse(localStorage.getItem(user));
if(data.dailyIncome) data.balance+=data.dailyIncome;
localStorage.setItem(user,JSON.stringify(data));
updateBalance();
}, 60000); // For demo, every 60 sec = 1 day
}

function updateBalance(){
let user=localStorage.getItem("currentUser");
let data=JSON.parse(localStorage.getItem(user));
document.getElementById("balance").innerText="Withdraw";
}

// Deposit / Referral / Withdraw
function submitDeposit(){alert("Deposit request submitted (demo).");}
function applyReferral(){alert("Referral code applied (demo).");}
function withdraw(){
let amt=prompt("Enter withdraw amount (min 100):");
if(!amt||amt<100){alert("Minimum 100 Tk");return;}
let user=localStorage.getItem("currentUser");
let data=JSON.parse(localStorage.getItem(user));
if(amt>data.balance){alert("Not enough balance!");return;}
data.balance-=parseInt(amt);
localStorage.setItem(user,JSON.stringify(data));
alert("Withdraw Successful!");
}

// Change password
function changePass(){
let np=prompt("New password:");
if(np){
let user=localStorage.getItem("currentUser");
let data=JSON.parse(localStorage.getItem(user));
data.password=np;
localStorage.setItem(user,JSON.stringify(data));
alert("Password Changed!");
}
}

function logout(){localStorage.removeItem("currentUser");location.reload();}

// Admin Login
const adminPassword="admin123";
function adminLogin(){
let pass=document.getElementById("adminPass").value;
if(pass!==adminPassword){alert("Wrong Admin Password!");return;}
loginBox.style.display="none";
registerBox.style.display="none";
adminLoginBox.style.display="none";
mainPage.style.display="none";
loadAdmin();
}

function loadAdmin(){
adminPage.style.display="block";
updateUserTable();
}

function updateUserTable(){
let table=document.getElementById("userTable");
table.innerHTML="<tr><th>User</th><th>Balance</th><th>Package</th><th>Action</th></tr>";
for(let i=0;i<localStorage.length;i++){
let key=localStorage.key(i);
if(key==="currentUser")continue;
let data=JSON.parse(localStorage.getItem(key));
let row=table.insertRow();
row.insertCell(0).innerText=key;
row.insertCell(1).innerText=data.balance;
row.insertCell(2).innerText=data.package||"-";
let btn=document.createElement("button");
btn.innerText="Add 100";
btn.onclick=function(){data.balance+=100;localStorage.setItem(key,JSON.stringify(data));updateUserTable();};
row.insertCell(3).appendChild(btn);
}
}

function adminLogout(){adminPage.style.display="none";showLogin();}

// Auto login if user exists
if(localStorage.getItem("currentUser")){loadDashboard();}
</script>

</body>
</html>
